<html>
<head>
    <title>NiCad6 Clone Report</title>
    <style type="text/css">
        body {font-family:sans-serif;}
        table {background-color:white; border:0px; padding:0px; border-spacing:4px; width:auto; margin-left:30px; margin-right:auto;}
        td {background-color:rgba(192,212,238,0.8); border:0px; padding:8px; width:auto; vertical-align:top; border-radius:8px}
        pre {background-color:white; padding:4px;}
        a {color:darkblue;}
    </style>
</head>
<body>
<h2>NiCad6 Clone Report</h2>
<table>
    <tr style="font-size:14pt">
        <td><b>System 1:</b> &nbsp; source</td>
        <td><b>System 2:</b> &nbsp; target</td>
        <td><b>Clone pairs:</b> &nbsp; 5443</td>
        <td><b>Clone classes:</b> &nbsp; 88</td>
    </tr>
    <tr style="font-size:12pt">
        <td style="background-color:white">Clone type: &nbsp; 3-2</td>
        <td style="background-color:white">Granularity: &nbsp; functions-blind</td>
        <td style="background-color:white">Max diff threshold: &nbsp; 30%</td>
        <td style="background-color:white">Clone size: &nbsp; 10 - 2500 lines</td>
        <td style="background-color:white">Total functions-blind: &nbsp; 16972</td>
    </tr>
</table>
<br>
<table style="width:1000px; border:2px solid lightgrey; border-radius:8px;">
    <tr><td style="background-color:white">
        <p style="font-size:14pt"><b>Class 1:</b> &nbsp; 3 fragments, nominal size 17 lines, similarity 80%</p>
        <table cellpadding=4 border=2>
            <tr>
                <td width="auto">
                    <a onclick="javascript:ShowHide('frag22')" href="javascript:;">
                        source/src/main/java/ZFCGPrint/DoPDFPrint.java: 100-122
                    </a>
                    <div class="mid" id="frag22" style="display:none"><pre>
    public String DrawCode(String code) {
        BarcodeQRCode barcode = new BarcodeQRCode(code, 400, 400, null);
        java.awt.Image pdfImg = barcode.createAwtImage(Color.black, Color.white);
        BufferedImage img = new BufferedImage(pdfImg.getWidth(null), pdfImg.getHeight(null),
                BufferedImage.TYPE_INT_RGB);
        Graphics g = img.createGraphics();
        g.drawImage(pdfImg, 0, 0, Color.WHITE, null);
        g.dispose();
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        // 创建ImageOutputStream流
        ImageOutputStream imageOutputStream;
        try {
            imageOutputStream = ImageIO.createImageOutputStream(baos);
            // 将二进制数据写进ByteArrayOutputStream
            ImageIO.write(img, "PNG", imageOutputStream);
            // ImageIO.write(img, "PNG", new File("D://33333.png"));
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        // 输出数组
        return Base64Util.encode(baos.toByteArray());
    }
</pre></div>
                </td>
                <td width="auto">
                    <a onclick="javascript:ShowHide('frag13339')" href="javascript:;">
                        target/src/main/java/com/epoint/ztb/lzgonggaopdfprint/DoPDFPrint.java: 199-221
                    </a>
                    <div class="mid" id="frag13339" style="display:none"><pre>
    public byte[] DrawCode(String code) {
        BarcodeQRCode barcode = new BarcodeQRCode(code, 80, 80, null);
        java.awt.Image pdfImg = barcode.createAwtImage(Color.black, Color.white);
        BufferedImage img = new BufferedImage(pdfImg.getWidth(null), pdfImg.getHeight(null),
                BufferedImage.TYPE_INT_RGB);
        Graphics g = img.createGraphics();
        g.drawImage(pdfImg, 0, 0, Color.WHITE, null);
        g.dispose();
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        // 创建ImageOutputStream流
        ImageOutputStream imageOutputStream;
        try {
            imageOutputStream = ImageIO.createImageOutputStream(baos);
            // 将二进制数据写进ByteArrayOutputStream
            ImageIO.write(img, "PNG", imageOutputStream);
            // ImageIO.write(img, "PNG", new File("D://33333.png"));
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        // 输出数组
        return baos.toByteArray();
    }
</pre></div>
                </td>
                <td width="auto">
                    <a onclick="javascript:ShowHide('frag3673')" href="javascript:;">
                        source/src/main/java/com/epoint/tdjyztbmis/purchasebook/action/BarCodeAction.java: 32-54
                    </a>
                    <div class="mid" id="frag3673" style="display:none"><pre>
    public void DrawCode(String code) {
        BarcodeQRCode barcode = new BarcodeQRCode(getRequestParameter("code"), 80, 80, null);
        java.awt.Image pdfImg = barcode.createAwtImage(Color.black, Color.white);
        BufferedImage img = new BufferedImage(pdfImg.getWidth(null), pdfImg.getHeight(null),
                BufferedImage.TYPE_INT_RGB);
        Graphics g = img.createGraphics();
        g.drawImage(pdfImg, 0, 0, Color.WHITE, null);
        g.dispose();
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        // 创建ImageOutputStream流
        ImageOutputStream imageOutputStream;
        try {
            imageOutputStream = ImageIO.createImageOutputStream(baos);
            // 将二进制数据写进ByteArrayOutputStream
            ImageIO.write(img, "PNG", imageOutputStream);
            // ImageIO.write(img, "PNG", new File("D://33333.png"));
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        // 输出数组
        sendRespose(baos.toByteArray());
    }
</pre></div>
                </td>
            </tr><tr>
        </tr>
        </table>

    </td></tr>
</table>
<br>
<table style="width:1000px; border:2px solid lightgrey; border-radius:8px;">
    <tr><td style="background-color:white">
        <p style="font-size:14pt"><b>Class 2:</b> &nbsp; 2 fragments, nominal size 32 lines, similarity 88%</p>
        <table cellpadding=4 border=2>
            <tr>
                <td width="auto">
                    <a onclick="javascript:ShowHide('frag25')" href="javascript:;">
                        source/src/main/java/com/epoint/zfcgztbmis/fabaoreg/action/ZfcgBiaoDuanForListAction.java: 56-90
                    </a>
                    <div class="mid" id="frag25" style="display:none"><pre>
    public DataGridModel&lt;CgBiaoduaninfo&gt; getDataModel() {
        if (dataGridModel == null) {
            dataGridModel = new DataGridModel&lt;CgBiaoduaninfo&gt;()
            {
                @Override
                public List&lt;CgBiaoduaninfo&gt; fetchData(int first, int pageSize, String sortField, String SortOrder) {
                    String sql = "select * from CG_BiaoDuanInfo where 1=1 ";
                    String cntsql = "select COUNT(*) from Cg_Biaoduaninfo where 1=1 ";
                    String where = getSearchCondition();
                    // 加入项目暂停终止的过滤 modify by momo 2011-07-06
                    if (!"BDYiChang".equals(type)) {
                        where += " and (biaoduanno is not null or biaoduanno!='')  and auditstatus='3'  and ISNULL(iszuofei,'0')='0' and (isliubiao is null or isliubiao!='1')";
                    }

                    // 区分政府采购代理和中心的项目负责人,采用不同的过滤条件
                    if (!DB_AllowTo.IsZBB()) {
                        where += " and sbr_unitguid ='" + ContextHelper.getdanweiguid() + "'";
                    }
                    else {
                        where += DB_Sys_Common.GetListCondition();
                    }
                    if (StringUtil.isNotBlank(LimitCondition))
                        where += " and " + LimitCondition + " and projectjiaoyitype='M' ";
                    sql += where;
                    cntsql += where;
                    sql += getGridSort(sortField, SortOrder, " order by row_id desc");
                    int cnt = service.queryInt(cntsql);
                    List&lt;CgBiaoduaninfo&gt; list = service.findList(sql, first, pageSize, CgBiaoduaninfo.class);
                    this.setRowCount(cnt);
                    return list;
                }
            };
        }
        return dataGridModel;
    }
</pre></div>
                </td>
                <td width="auto">
                    <a onclick="javascript:ShowHide('frag8195')" href="javascript:;">
                        target/src/main/java/com/epoint/zfcgztbmis/fabaoreg/action/HYZfcgBiaoDuanForListAction.java: 58-100
                    </a>
                    <div class="mid" id="frag8195" style="display:none"><pre>
    public DataGridModel&lt;CgBiaoduaninfo&gt; getDataModel() {
        if (dataGridModel == null) {
            dataGridModel = new DataGridModel&lt;CgBiaoduaninfo&gt;()
            {
                @Override
                public List&lt;CgBiaoduaninfo&gt; fetchData(int first, int pageSize, String sortField, String SortOrder) {
                    String sql = "select * from CG_BiaoDuanInfo where 1=1 ";
                    String cntsql = "select COUNT(*) from Cg_Biaoduaninfo where 1=1 ";
                    String where = getSearchCondition();
                    // 加入项目暂停终止的过滤 modify by momo 2011-07-06
                    if (!"BDYiChang".equals(type)) {
                        where += " and (biaoduanno is not null or biaoduanno!='')  and auditstatus='3'  and ISNULL(iszuofei,'0')='0' and (isliubiao is null or isliubiao!='1')";
                    }

                    // 区分政府采购代理和中心的项目负责人,采用不同的过滤条件
                    if (!DB_AllowTo.IsZBB()) {
                        // 业务系统兼容财政传过来的数据根据UnitOrgNum来筛选 add by zxhao 20180811
                        where += " and ((sbr_unitguid='" + ContextHelper.getdanweiguid()
                                + "') OR (SBR_NAME='衡阳财政局' AND PROJECTJIAOYITYPE='M' AND PROJECTGUID IN (SELECT PROJECTGUID FROM CG_ProjectInfo WHERE UnitOrgNum IN (SELECT UnitOrgNum FROM HuiYuan_UnitComInfo WHERE DanWeiGuid='"
                                + MemberSession.getInstance().getDanWeiGuid() + "'))))";
                    }
                    else {
                        where += DB_Sys_Common.GetListCondition();
                    }
                    if (StringUtil.isNotBlank(LimitCondition))
                        where += " and " + LimitCondition + " and projectjiaoyitype='M' ";
                    sql += where;
                    cntsql += where;
                    sql += getGridSort(sortField, SortOrder, " order by row_id desc");
                    int cnt = service.queryInt(cntsql);
                    List&lt;CgBiaoduaninfo&gt; list = service.findList(sql, first, pageSize, CgBiaoduaninfo.class);
                    // 添加政府采购编号列 by mqiong 20181025
                    for (CgBiaoduaninfo item : list) {
                        item.set("zfcgno", service.queryString(
                                "select zfcgno from cg_projectinfo where projectguid='" + item.getProjectguid() + "'"));
                    }
                    this.setRowCount(cnt);
                    return list;
                }
            };
        }
        return dataGridModel;
    }
</pre></div>
                </td>
            </tr><tr>
        </tr>
        </table>
    </td></tr>
</table>
<br>
<table style="width:1000px; border:2px solid lightgrey; border-radius:8px;">
    <tr><td style="background-color:white">
        <p style="font-size:14pt"><b>Class 3:</b> &nbsp; 2 fragments, nominal size 157 lines, similarity 94%</p>
        <table cellpadding=4 border=2>
            <tr>
                <td width="auto">
                    <a onclick="javascript:ShowHide('frag27')" href="javascript:;">
                        source/src/main/java/com/epoint/zfcgztbmis/fabaoreg/action/ZfcgBiaoDuanForListAction.java: 92-265
                    </a>
                    <div class="mid" id="frag27" style="display:none"><pre>
    public String getSearchCondition() {
        String strCondition = "";
        if (StringUtil.isNotBlank(txtProNo)) {
            strCondition += " and biaoduanno like '%" + service.SQL_Encode(txtProNo) + "%'";
        }
        if (StringUtil.isNotBlank(txtProName)) {
            strCondition += " and biaoduanname like '%" + service.SQL_Encode(txtProName) + "%'";
        }

        switch (BDChoiceType.toType(type.toLowerCase())) {
            case caigouyg:
                LimitCondition = "zhaobiaofangshi not in ('1','2','3')";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += " and biaoduanguid not in (select biaoduanguid FROM cg_yugaoandbd)";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and biaoduanguid in (select biaoduanguid FROM cg_yugaoandbd)";
                    showOkButton = false;
                }
                rowCheckerType = "Multi";
                TargetUrl = "zfcgztbmis/pages/caigouyugao/CaiGouYuGao_Workflow";
                break;
            case zhaobiaogg:
                LimitCondition = "projectguid in (select projectguid from  Cg_Projectinfo where auditstatus='3') and zhaobiaofangshi not in ('1')";

                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += " and biaoduanguid not in (select biaoduanguid FROM CG_ZBGGAndBD)";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and biaoduanguid in (select biaoduanguid FROM CG_ZBGGAndBD)";
                    showOkButton = false;
                }
                TargetUrl = "zfcgztbmis/pages/zhaobiaogginfo/ZBGG_Workflow";
                rowCheckerType = "Multi";
                break;
            case biangenggg:
                LimitCondition = "biaoduanguid in (select biaoduanguid from CgZbggandbd where auditstatus='3') and (BianGengGGChecked ='0' or BianGengGGChecked is null)";
                rowCheckerType = "Multi";
                // TargetUrl = "";
                break;
            case xieyicaigou:
                LimitCondition = "zhaobiaofangshi='1'";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += " and (IsXieYi is null or IsXieYi='')";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and IsXieYi='1'";
                    showOkButton = false;
                }
                rowCheckerType = "Single";
                break;
            case zbfile:
                LimitCondition = "zhaobiaofangshi not in ('1','2','3') and  biaoduanguid in (select biaoduanguid from view_cg_zhaobiaogg WHERE auditstatus='3')";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += " and isnull(ZhaoBiaoBeiAnIsSelected,'0')='0'";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and ZhaoBiaoBeiAnIsSelected='1'";
                    showOkButton = false;
                }
                if ("1".equals(getFrameConfigValue("政府采购_招标文件是否多选"))) {
                    rowCheckerType = "Multi";
                }
                else {
                    rowCheckerType = "Single";
                }
                TargetUrl = "zfcgztbmis/pages/zbfilereg/ZBFile_Workflow";
                break;
            case zbfilezhizuo:
                LimitCondition = "zhaobiaofangshi NOT IN ('1','2','3') and biaoduanguid in (select biaoduanguid from view_cg_zhaobiaogg WHERE auditstatus='3')";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += " and isnull(ZhaoBiaoBeiAnIsSelected,'0')='0'";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and ZhaoBiaoBeiAnIsSelected='1'";
                    showOkButton = false;
                }
                rowCheckerType = "Multi";
                TargetUrl = "zfcgztbmis/pages/zbfilereg/ZBMBFile_List?FileType=ZB";
                break;
            case bdyichang:
                // 如果标段异常主表已挑选过此标段，不能重复挑选 modify by zwb 2016-1-25
                // 如果是现场变更只变更采购方式，可以多次挑选 吕素梅 2016-07-18
                //LimitCondition = "BiaoDuanGuid in (select BiaoDuanGuid from cg_yichangbdhistory where auditstatus='3')";
                LimitCondition += " biaoduanno IS NOT NULL ";
                // 加入项目暂停终止的过滤 modify by momo 2011-07-06
                LimitCondition += " and auditstatus='3' ";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += " AND yichangisselected='0'";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " AND yichangisselected='1'";
                    showOkButton = false;
                }
                rowCheckerType = "Single";
                TargetUrl = "zfcgztbmis/pages/liubiaocl/BiaoDuanYiChang_Workflow";
                break;
            case zhongbiaogongshi:
                LimitCondition = "zhaobiaofangshi not in ('1','2','3') and biaoduanguid in (select biaoduanguid from view_cg_zhaobiaogg WHERE auditstatus='3') and kaibiaodate &lt; GETDATE() ";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += " and (zhongbiaoisselected='0' or zhongbiaoisselected is null or zhongbiaoisselected='')";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and zhongbiaoisselected='1'";
                    showOkButton = false;
                }
                rowCheckerType = "Multi";
                TargetUrl = "zfcgztbmis/pages/zhongbiaogongshi/ZhongBiaoGS_Workflow";
                break;
            case zhongbiaotzs:
                LimitCondition = "(gonggaoisselected='1' OR IsConfirmZhongBiaoDW='1') and biaoduanguid in (select biaoduanguid from View_CG_ZhongBiaoGS where auditstatus = '3')";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += "  and ( Zbjieguoisselected='0'  or Zbjieguoisselected is null or Zbjieguoisselected='')";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and Zbjieguoisselected = '1'";
                    showOkButton = false;
                }
                rowCheckerType = "Single";
                TargetUrl = "zfcgztbmis/pages/zhongbiaotzs/ZhongBiaoTZS_Workflow";
                break;
            case zhaobiaorenpw:
                LimitCondition = "zhaobiaofangshi NOT IN ('1','2','3')";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += "  and (ZbPingWeiIsSelected !='1' OR ZbPingWeiIsSelected is null )";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and ZbPingWeiIsSelected ='1'";
                    showOkButton = false;
                }
                rowCheckerType = "Multi";
                TargetUrl = "zfcgztbmis/pages/zhaobiaorenpw/ZhaoBiaoRenPW_Workflow";
                break;
            case hetong:
                LimitCondition = "zhaobiaofangshi NOT IN ('1','2','3') AND (zhongbiaoisselected='1' OR isconfirmzhongbiaodw='1') ";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += "  and isnull(HeTongIsSelected,'0')='0'";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and HeTongIsSelected='1'";
                    showOkButton = false;
                }
                rowCheckerType = "Single";
                TargetUrl = "zfcgztbmis/pages/hetongba/HeTongBA_Workflow";
                break;
            case smreport:
                LimitCondition = "zhaobiaofangshi IN ('公','竞','邀','询') AND (zhongbiaoisselected='1' or IsConfirmZhongBiaoDW='1')";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += "  and (baogaodanisselected is null or baogaodanisselected='' or baogaodanisselected ='0')";
                }
                else {
                    LimitCondition += " and baogaodanisselected ='1'";
                }
                showOkButton = true;
                rowCheckerType = "Single";
                TargetUrl = "";
                break;
            default:
                break;
        }

        addViewData("TargetUrl", TargetUrl);
        return strCondition;
    }
</pre></div>
                </td>
                <td width="auto">
                    <a onclick="javascript:ShowHide('frag8197')" href="javascript:;">
                        target/src/main/java/com/epoint/zfcgztbmis/fabaoreg/action/HYZfcgBiaoDuanForListAction.java: 102-283
                    </a>
                    <div class="mid" id="frag8197" style="display:none"><pre>
    public String getSearchCondition() {
        String strCondition = "";
        if (StringUtil.isNotBlank(txtProNo)) {
            strCondition += " and biaoduanno like '%" + service.SQL_Encode(txtProNo) + "%'";
        }
        if (StringUtil.isNotBlank(txtProName)) {
            strCondition += " and biaoduanname like '%" + service.SQL_Encode(txtProName) + "%'";
        }

        switch (HYBDChoiceType.toType(type.toLowerCase())) {
            case caigouyg:
                LimitCondition = "zhaobiaofangshi not in ('1','2','3') and (iscancel is null or isCancel not in ('1','2','3')) ";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += " and biaoduanguid not in (select biaoduanguid FROM cg_yugaoandbd)";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and biaoduanguid in (select biaoduanguid FROM cg_yugaoandbd)";
                    showOkButton = false;
                }
                rowCheckerType = "Multi";
                TargetUrl = "zfcgztbmis/pages/caigouyugao/CaiGouYuGao_Workflow";
                break;
            case zhaobiaogg:
                LimitCondition = "projectguid in (select projectguid from  Cg_Projectinfo where auditstatus='3') and zhaobiaofangshi not in ('1') and (iscancel is null or isCancel not in ('1','2','3')) ";
                // 增加zishentype 限制 edit by yangjian 20181123
                // PPP项目也可以挑选，add by wangjian at 2019.8.13
                LimitCondition += "and (isnull(zishentype,'2')='2' or ( isnull( zishentype, '2' ) = '1' ) AND projectGuid IN ( SELECT projectguid FROM CG_ProjectInfo WHERE isnull( ispppproject, '0' ) = '1' ))";

                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += " and biaoduanguid not in (select isnull(biaoduanguid,'') FROM CG_ZBGGAndBD) ";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and biaoduanguid in (select isnull(biaoduanguid,'') FROM CG_ZBGGAndBD) ";
                    showOkButton = false;
                }
                TargetUrl = "zfcgztbmis/pages/zhaobiaogginfo/ZBGG_Workflow";
                rowCheckerType = "Multi";
                break;
            case biangenggg:
                LimitCondition = "biaoduanguid in (select biaoduanguid from CgZbggandbd where auditstatus='3') and (BianGengGGChecked ='0' or BianGengGGChecked is null) and (iscancel is null or isCancel not in ('1','2','3'))";
                rowCheckerType = "Multi";
                // TargetUrl = "";
                break;
            case xieyicaigou:
                LimitCondition = "zhaobiaofangshi='1' and (iscancel is null or isCancel not in ('1','2','3')) ";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += " and (IsXieYi is null or IsXieYi='')";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and IsXieYi='1'";
                    showOkButton = false;
                }
                rowCheckerType = "Single";
                break;
            case zbfile:
                // 去除招标方式限制 edit by yangjian 20181207
                LimitCondition = "biaoduanguid in (select biaoduanguid from cg_zhaobiaogginfo WHERE auditstatus='3') and (iscancel is null or isCancel not in ('1','2','3')) ";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += " and isnull(ZhaoBiaoBeiAnIsSelected,'0')='0'";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and ZhaoBiaoBeiAnIsSelected='1'";
                    showOkButton = false;
                }
                if ("1".equals(getFrameConfigValue("政府采购_招标文件是否多选"))) {
                    rowCheckerType = "Multi";
                }
                else {
                    rowCheckerType = "Single";
                }
                TargetUrl = "zfcgztbmis/pages/zbfilereg/ZBFile_Workflow";
                break;
            case zbfilezhizuo:
                LimitCondition = "zhaobiaofangshi NOT IN ('1','2','3') and biaoduanguid in (select biaoduanguid from cg_zhaobiaogginfo WHERE auditstatus='3') and (iscancel is null or isCancel not in ('1','2','3')) ";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += " and isnull(ZhaoBiaoBeiAnIsSelected,'0')='0'";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and ZhaoBiaoBeiAnIsSelected='1'";
                    showOkButton = false;
                }
                rowCheckerType = "Multi";
                TargetUrl = "zfcgztbmis/pages/zbfilereg/ZBMBFile_List?FileType=ZB";
                break;
            case bdyichang:
                // 如果标段异常主表已挑选过此标段，不能重复挑选 modify by zwb 2016-1-25
                // 如果是现场变更只变更采购方式，可以多次挑选 吕素梅 2016-07-18
                LimitCondition = "BiaoDuanGuid not in (select BiaoDuanGuid from cg_yichangbdhistory where chuliresault='1') and (iscancel is null or isCancel not in ('1','2','3')) ";
                LimitCondition += " and biaoduanno IS NOT NULL ";
                // 加入项目暂停终止的过滤 modify by momo 2011-07-06
                LimitCondition += " and auditstatus='3' ";
                if ("0".equals(drpStstus)) {// 未发布过
                    showOkButton = true;
                }
                else {
                    showOkButton = false;
                }
                rowCheckerType = "Single";
                TargetUrl = "zfcgztbmis/pages/liubiaocl/BiaoDuanYiChang_Workflow";
                break;
            case zhongbiaogongshi:
                LimitCondition = " biaoduanguid in (select biaoduanguid from cg_zhaobiaogginfo WHERE auditstatus='3') and kaibiaodate &lt; GETDATE() and (iscancel is null or isCancel not in ('1','2','3')) ";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += " and (zhongbiaoisselected='0' or zhongbiaoisselected is null or zhongbiaoisselected='')";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and zhongbiaoisselected='1'";
                    showOkButton = false;
                }
                rowCheckerType = "Multi";
                TargetUrl = "zfcgztbmis/pages/zhongbiaogongshi/ZhongBiaoGS_Workflow";
                break;
            case zhongbiaotzs:
                LimitCondition = "(gonggaoisselected='1' OR IsConfirmZhongBiaoDW='1') and biaoduanguid in (select biaoduanguid from View_CG_ZhongBiaoGS where auditstatus = '3') and (iscancel is null or isCancel not in ('1','2','3'))";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += "  and ( Zbjieguoisselected='0'  or Zbjieguoisselected is null or Zbjieguoisselected='')";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and Zbjieguoisselected = '1'";
                    showOkButton = false;
                }
                rowCheckerType = "Single";
                TargetUrl = "zfcgztbmis/pages/zhongbiaotzs/ZhongBiaoTZS_Workflow";
                break;
            case zhaobiaorenpw:
                LimitCondition = "zhaobiaofangshi NOT IN ('1','2','3') and (iscancel is null or isCancel not in ('1','2','3')) ";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += "  and (ZbPingWeiIsSelected !='1' OR ZbPingWeiIsSelected is null )";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and ZbPingWeiIsSelected ='1'";
                    showOkButton = false;
                }
                rowCheckerType = "Multi";
                TargetUrl = "zfcgztbmis/pages/zhaobiaorenpw/ZhaoBiaoRenPW_Workflow";
                break;
            case hetong:
                LimitCondition = "zhaobiaofangshi NOT IN ('1','2','3') AND (zhongbiaoisselected='1' OR isconfirmzhongbiaodw='1') and (iscancel is null or isCancel not in ('1','2','3')) ";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += "  and isnull(HeTongIsSelected,'0')='0'";
                    showOkButton = true;
                }
                else {
                    LimitCondition += " and HeTongIsSelected='1'";
                    showOkButton = false;
                }
                rowCheckerType = "Single";
                TargetUrl = "zfcgztbmis/pages/hetongba/HeTongBA_Workflow";
                break;
            case smreport:
                LimitCondition = "zhaobiaofangshi IN ('公','竞','邀','询') AND (zhongbiaoisselected='1' or IsConfirmZhongBiaoDW='1') And (iscancel is null or isCancel not in ('1','2','3')) ";
                if ("0".equals(drpStstus)) {// 未发布过
                    LimitCondition += "  and (baogaodanisselected is null or baogaodanisselected='' or baogaodanisselected ='0')";
                }
                else {
                    LimitCondition += " and baogaodanisselected ='1'";
                }
                showOkButton = true;
                rowCheckerType = "Single";
                TargetUrl = "";
                break;
            case bdcancel:
                LimitCondition = " (iscancel is null or isCancel not in ('1','2','3'))";
                showOkButton = true;
                rowCheckerType = "Single";
                TargetUrl = "zfcgztbmis/pages/projectcancel/BiaoDuanCancel_Workflow";
                break;
            default:
                break;
        }

        addViewData("TargetUrl", TargetUrl);
        return strCondition;
    }
</pre></div>
                </td>
            </tr><tr>
        </tr>
        </table>
    </td></tr>
</table>
<br>
<table style="width:1000px; border:2px solid lightgrey; border-radius:8px;">
    <tr><td style="background-color:white">
        <p style="font-size:14pt"><b>Class 4:</b> &nbsp; 4 fragments, nominal size 43 lines, similarity 78%</p>
        <table cellpadding=4 border=2>
            <tr>
                <td width="auto">
                    <a onclick="javascript:ShowHide('frag28')" href="javascript:;">
                        source/src/main/java/com/epoint/zfcgztbmis/fabaoreg/action/ZfcgBiaoDuanForListAction.java: 267-319
                    </a>
                    <div class="mid" id="frag28" style="display:none"><pre>
    public String respon() {
        TargetUrl = getViewData("TargetUrl");
        String row_id = "";
        String msg = "";
        if (getDataModel().getSelectKeys() == null || getDataModel().getSelectKeys().size() == 0)
            return "{\"status\":false,\"msg\":\"请选择需要操作的分包\"}";


        for (String rowid : getDataModel().getSelectKeys()) {
            row_id += rowid + ",";
        }

        row_id = Functions.TrimEnd(row_id, ",");
        String strUrl="";
        if(TargetUrl.indexOf("?")&lt;0){
            strUrl = "?SelectRowID=" + row_id;
        }else{
            strUrl = "&amp;SelectRowID=" + row_id;
        }

        if (!"".equals(CanShu)) {
            strUrl += "&amp;" + CanShu;
        }

        if (StringUtil.isNotBlank(type) &amp;&amp; "ZBFileZhiZuo".equals(type)) {
            String sql = "select IsUseWebZtb from VIEW_CG_BIAODUAN where row_id in(" + row_id + ")";
            String StrIsUseWebZtb = service.queryString(sql);
            if ("0".equals(StrIsUseWebZtb)) {
                return "{\"status\":false,\"msg\":\"" + "此标段非网上招投标,无法制作招标文件!" + "\"}";
            }
        }

        // 根据条件限制弹出不同的提示信息。
        switch (Integer.parseInt(new DB_JSGC_BiaoDuanInfo().checkSelect(row_id, type))) {
            case 0:
                return "{\"status\":true,\"msg\":\"" + "../../../" + getViewData("TargetUrl") + strUrl + "\"}";
            case 1:
                msg = "所选择的分包不在同一个项目中，请确认！";
                break;
            case 2:
                msg = "所选择的分包不是同一个招标代理，请确认！";
                break;
            case 3:
                msg = "所选分包必须在同一个地区才能一起预约，请确认！";
                break;
            case 4:
                msg = "所选择的分包不是同一采购方式，请确认！";
                break;
            default:
                break;
        }
        return "{\"status\":false,\"msg\":\"" + msg + "\"}";
    }
</pre></div>
                </td>
                <td width="auto">
                    <a onclick="javascript:ShowHide('frag8198')" href="javascript:;">
                        target/src/main/java/com/epoint/zfcgztbmis/fabaoreg/action/HYZfcgBiaoDuanForListAction.java: 285-337
                    </a>
                    <div class="mid" id="frag8198" style="display:none"><pre>
    public String respon() {
        TargetUrl = getViewData("TargetUrl");
        String row_id = "";
        String msg = "";
        if (getDataModel().getSelectKeys() == null || getDataModel().getSelectKeys().size() == 0)
            return "{\"status\":false,\"msg\":\"请选择需要操作的分包\"}";

        for (String rowid : getDataModel().getSelectKeys()) {
            row_id += rowid + ",";
        }

        row_id = Functions.TrimEnd(row_id, ",");
        String strUrl = "";
        if (TargetUrl.indexOf("?") &lt; 0) {
            strUrl = "?SelectRowID=" + row_id;
        }
        else {
            strUrl = "&amp;SelectRowID=" + row_id;
        }

        if (!"".equals(CanShu)) {
            strUrl += "&amp;" + CanShu;
        }

        if (StringUtil.isNotBlank(type) &amp;&amp; "ZBFileZhiZuo".equals(type)) {
            String sql = "select IsUseWebZtb from VIEW_CG_BIAODUAN where row_id in(" + row_id + ")";
            String StrIsUseWebZtb = service.queryString(sql);
            if ("0".equals(StrIsUseWebZtb)) {
                return "{\"status\":false,\"msg\":\"" + "此标段非网上招投标,无法制作招标文件!" + "\"}";
            }
        }

        // 根据条件限制弹出不同的提示信息。
        switch (Integer.parseInt(new DB_JSGC_BiaoDuanInfo().checkSelect(row_id, type))) {
            case 0:
                return "{\"status\":true,\"msg\":\"" + "../../../" + getViewData("TargetUrl") + strUrl + "\"}";
            case 1:
                msg = "所选择的分包不在同一个项目中，请确认！";
                break;
            case 2:
                msg = "所选择的分包不是同一个招标代理，请确认！";
                break;
            case 3:
                msg = "所选分包必须在同一个地区才能一起预约，请确认！";
                break;
            case 4:
                msg = "所选择的分包不是同一采购方式，请确认！";
                break;
            default:
                break;
        }
        return "{\"status\":false,\"msg\":\"" + msg + "\"}";
    }
</pre></div>
                </td>
                <td width="auto">
                    <a onclick="javascript:ShowHide('frag8343')" href="javascript:;">
                        target/src/main/java/com/epoint/zfcgztbmis/pppprozbgs/action/HYPPPBDForSelListAction.java: 151-196
                    </a>
                    <div class="mid" id="frag8343" style="display:none"><pre>
    public String respon() {
        TargetUrl = getViewData("TargetUrl");
        String row_id = "";
        String msg = "";
        if (getDataModel().getSelectKeys() == null || getDataModel().getSelectKeys().size() == 0) {
            return "{\"status\":false,\"msg\":\"请挑选分包！\"}";
        }

        for (String rowid : getDataModel().getSelectKeys()) {
            row_id += rowid + ",";
        }

        row_id = Functions.TrimEnd(row_id, ",");
        String strUrl = "";
        if (TargetUrl.indexOf("?") &lt; 0) {
            strUrl = "?SelectRowID=" + row_id;
        }
        else {
            strUrl = "&amp;SelectRowID=" + row_id;
        }

        if (StringUtil.isNotBlank(CanShu)) {
            strUrl += "&amp;" + CanShu;
        }

        // 根据条件限制弹出不同的提示信息。
        switch (Integer.parseInt(new DB_JSGC_BiaoDuanInfo().checkSelect(row_id, type))) {
            case 0:
                return "{\"status\":true,\"msg\":\"" + "../../../" + getViewData("TargetUrl") + strUrl + "\"}";
            case 1:
                msg = "所选择的分包不在同一个项目中，请确认！";
                break;
            case 2:
                msg = "所选择的分包不是同一个招标代理，请确认！";
                break;
            case 3:
                msg = "所选分包必须在同一个地区才能一起预约，请确认！";
                break;
            case 4:
                msg = "所选择的分包不是同一采购方式，请确认！";
                break;
            default:
                break;
        }
        return "{\"status\":false,\"msg\":\"" + msg + "\"}";
    }
</pre></div>
                </td>
                <td width="auto">
                    <a onclick="javascript:ShowHide('frag15753')" href="javascript:;">
                        target/src/main/java/com/epoint/ZHManageMis/changebankno/action/HYBiaoDuanForBzjListAction.java: 78-122
                    </a>
                    <div class="mid" id="frag15753" style="display:none"><pre>
    public String respon() {
        TargetUrl = "changebankno/ChangeBankNo_Workflow";
        String row_id = "";
        String msg = "";
        if (getDataModel().getSelectKeys().isEmpty())
            return "{\"status\":false,\"msg\":\"请选择需要操作的标段(包)\"}";

        for (String rowid : getDataModel().getSelectKeys()) {
            row_id += rowid + ",";
        }

        row_id = Functions.TrimEnd(row_id, ",");
        String strUrl = "";
        if (TargetUrl.indexOf("?") &lt; 0) {
            strUrl = "?SelectRowID=" + row_id;
        }
        else {
            strUrl = "&amp;SelectRowID=" + row_id;
        }

        if (!"".equals(CanShu)) {
            strUrl += "&amp;" + CanShu;
        }

        // 根据条件限制弹出不同的提示信息。
        switch (Integer.parseInt(new DB_JSGC_BiaoDuanInfo().checkSelect(row_id, type))) {
            case 0:
                return "{\"status\":true,\"msg\":\"" + "../../../zhmanagemis/pages/" + TargetUrl + strUrl + "\"}";
            case 1:
                msg = "所选择的分包不在同一个项目中，请确认！";
                break;
            case 2:
                msg = "所选择的分包不是同一个招标代理，请确认！";
                break;
            case 3:
                msg = "所选分包必须在同一个地区才能一起预约，请确认！";
                break;
            case 4:
                msg = "所选择的分包不是同一采购方式，请确认！";
                break;
            default:
                break;
        }
        return "{\"status\":false,\"msg\":\"" + msg + "\"}";
    }
</pre></div>
                </td>
            </tr><tr>
        </tr>
        </table>
    </td></tr>
</table>
<br>

<script language="JavaScript">
    function ShowHide(divId) {
        if(document.getElementById(divId).style.display == 'none') {
            document.getElementById(divId).style.display='block';
        } else {
            document.getElementById(divId).style.display = 'none';
        }
    }
</script>
</body>
</html>
